1.什么是SpringBoot框架
    SpringBoot是一个快速整合第三方框架,简化xml,完全采用注解化.
    内置http服务器(jetty和tomcat undertow) 最终是以Java应用程序执行的.

    重点:快速整合第三方框架  内置http服务器

SpringBoot  快速开发框架,快速整合三方框架(maven子父依赖关系)
SpringCloud 微服务框架 rpc远程框架调用
SpringCloud 底层依赖于SpringBoot实现微服务接口
(SpringBoot Web组件集成SpringMVC框架),采用SpringMVC书写接口

微服务==>http接口 服务治理 注册中心 客户端调用 网关 断路器...

    注解在什么时候产生?Spring3.0以上(提供注解)
    SpringMVC内置注解加载整个SpringMVC容器
    
    Java语言操作SpringMVC配置初始化
    使用Java代码编写SpringMVC配置初始化
    Java语言创建tomcat 加载class


Logback是log4j框架的作者开发的新一代日志框架，它效率更高、能够适应诸多的运行环境，同时天然支持SLF4J。
默认情况下，Spring Boot会用Logback来记录日志，并用INFO级别输出到控制台。在运行应用程序和其他例子时，你应该已经看到很多INFO级别的日志了。


分析SpringBoot分析原理


SpringMVC的请求流程
    ⑴ 用户发送请求至前端控制器DispatcherServlet
    ⑵ DispatcherServlet收到请求调用HandlerMapping处理器映射器。
    ⑶ 处理器映射器根据请求url找到具体的处理器，生成处理器对象及处理器拦截器(如果有则生成)一并返回给DispatcherServlet。
    ⑷ DispatcherServlet通过HandlerAdapter处理器适配器调用处理器
    ⑸ 执行处理器(Controller，也叫后端控制器)。
    ⑹ Controller执行完成返回ModelAndView
    ⑺ HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet
    ⑻ DispatcherServlet将ModelAndView传给ViewReslover视图解析器
    ⑼ ViewReslover解析后返回具体View
    ⑽ DispatcherServlet对View进行渲染视图（即将模型数据填充至视图中）。
    ⑾ DispatcherServlet响应用户。


DNS解析IP过程
    1.浏览器会检查缓存中有没有这个域名对应的解析过的IP地址.如果缓存中有,这个解析过程就会结束.
        浏览器缓存域名也是有限制的,不仅浏览器缓存大小有限制的,而且缓存的时间也有限制,通常情况下为几分钟到几小时不等.
        域名被缓存的时间限制可以通过TTL属性来设置.这个缓存时间太长和太短都不好.
        如果域名解析的IP发生了变化,会导致被客户端缓存的域名无法解析到变化后的IP地址,以致于该域名不能正常解析
        如果设置时间太短,会导致用户每次访问网站都要重新解析一次域名.
    2.如果用户浏览器缓存中没有数据,浏览器会查找操作系统缓存中是否有这个域名对应的DNS解析结果.
        其实操作系统也有域名解析的过程,windows中有hosts文件来设置,linux中在/etc/hosts文件来设置.(域名劫持)
    3.如果本地无法解析时,就要用到配置的DNS服务器地址了,这个DNS服务器地址一般都会缓存域名解析结果,当然缓存时间也是受到域名的失效时间来控制的.大约80%的域名解析请求到这里就会结束了.LDNS 本地区域域名服务器
    4.如果LDNS本地区域域名服务器没有命中,则直接到Root Server域名服务器请求解析.
    5.Root Server 根域名解析服务器返回本地域名服务器一个所查询的主域名服务器(gTLD Server)地址.gTLD是国际顶级域名服务器,如.com、.cn、.org等.
    6.本地域名服务器LDNS再向上一步返回的gTLD服务器发送请求
    7.接受请求的gTLD服务器查找并返回此域名对应的Name Server域名服务器的地址，这个Name Server通常就是用户注册的域名服务器，例如用户在某个域名服务提供商申请的域名，那么这个域名解析任务就由这个域名提供商的服务器来完成
    8.Name Server域名服务器会查询存储的域名和IP映射关系表,在正常的情况下根据域名查到目标IP地址.连同一个TTL值返回给DNS域名服务器
    9.返回该域名对应的IP和TTL值 LDNS会缓存这个域名和IP的对应关系.缓存时间由TTL值来控制.
    10.把解析的结果返回给用户,用户根据TTL值缓存在本地系统缓存中,域名解析过程结束


正向代理 反向代理
正向代理隐藏了真实的请求客户端。服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求，某些科学上网工具扮演的就是典型的正向代理角色。
    用浏览器访问http://www.google.com时被墙了，于是你可以在国外搭建一台代理服务器，让代理帮我去请求google.com，代理把请求返回的相应结构再返回给我。
反向代理隐藏了真实的服务端，当我们请求 ww.baidu.com 的时候，就像拨打10086一样，背后可能有成千上万台服务器为我们服务，但具体是哪一台，你不知道，也不需要知道，你只需要知道反向代理服务器是谁就好了，
    ww.baidu.com 就是我们的反向代理服务器，反向代理服务器会帮我们把请求转发到真实的服务器那里去。Nginx就是性能非常好的反向代理服务器，用来做负载均衡。

外网映射工具 https://natapp.cn

Nginx应用场景
    http服务器### 使用Nginx做静态服务器 图片服务器
    虚拟主机配置 将一台服务器,拆封多个网站部署.
    反向代理(负载均衡) 使用反向代理隐藏真实IP地址访问  负载均衡(集群)能减少单台服务器的压力 提交容灾能力 故障转移(重试机制幂等问题,健康检查(tcp http 心跳检测))
    安全配置
使用Nginx搭建API网关###解决网站跨域###
使用Nginx实现网站动静分离
使用Nginx实现防止DDOS(安全控制)
使用Nginx配置缓存(Http)


Nginx虚拟主机配置
    Nginx.conf配置解释
        http模块
            Server  作用 内部创建服务器 监听端口
            name    配置域名
            localtion   匹配拦截URL地址 配置拦截技术, localtion / {}拦截后跳转根目录 一般是资源目录文件 html文件
            index   默认首页地址 index.html
            root    表示存放Nginx的根目录 默认文件夹

基于域名区分项目路径
基于端口区分项目路径

Nginx的反向代理(基于Nginx实现反向代理)
    反向代理作用 提高安全性(隐藏真实服务器IP地址)
    proxy_pass 反向代理转发的真实IP地址 http;//127.0.0.1:80
    抓包工具无法抓取内部转发请求

Nginx七层负载均衡

Nginx主要作用是反向代理
    网关作用权限控制(互联网安全架构设计 黑名单 白名单系统)

外网网关Nginx
内网网关zuul

1.什么是负载均衡?
    使用负载均衡
        四层负载均衡器(基于传输层,也叫作基于TCP协议实现负载均衡,LVS(软负载)和F5硬件负载)
        七层负载均衡器(基于应用层,也叫作基于http协议实现负载均衡)Web服务实现负载均衡
2.为什么要用负载均衡
    解决高并发,将所有请求拦截到负载均衡器,在有负载均衡器采用负载均衡算法(轮询 权重 IP绑定)
3.负载均衡给我们带来的问题
4.负载均衡算法


四层负载均衡器和七层负载均衡器的区别:
    四层负载均衡器 主要在传输层实现负载均衡 主要针对于TCP协议
    七层负载均衡器 主要在应用层实现负载均衡 主要针对于HTTP协议

Nginx通过UpStream Server 配置多个upstreamServer实现负载均衡机制
失败重试机制:当upstream server(真实业务逻辑访问的服务器)出现超时或者服务器不在线的情况下,是否考虑重试机制(补偿机制)
服务器心跳检测:当upstream server 监控检测 心跳检测
    被Nginx代理最后真实访问的服务器
    负载均衡算法:
        轮询    每个请求按时间顺序逐一分配不同的后端服务器,如果后端某台服务器宕机,自动剔除故障系统(故障转移),使用户访问不受影响.
        轮询权重    weight的值越大分配到的访问概率越高,主要用于后端每台服务器性能不均衡的情况下.或者是为主从的情况下设置不同的权重,达到合理有效的利用主机性能资源.
        ipHash 每个请求按照ip的hash分配,使来自同一个ip的访客固定使用同一个后端服务器,并且有效解决session共享的问题,俗称ip绑定.
        fair(第三方)    fair是根据页面大小和加载时间长短智能的进行负载均衡,也就是根据后端服务器的响应时间来分配请求.响应时间短的优先分配.
            (Nginx不支持此算法,如果需要,须安装upstream fair模块)
        url hash(第三方) 按访问的url的hash结果来分配请求,使每一个请求定向到一台后端服务器,可以进一步提高缓存服务器的效率.
            (须安装Nginx的hash软件包)

服务器集群(分布式中常见问题)
    1.分布式Session一致性问题
    2.分布式Job幂等性问题
    3.分布式生成全局ID
    4.分布式锁解决方案
    5.分布式配置中心
    6.分布式日志收集系统